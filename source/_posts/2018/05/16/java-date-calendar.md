---
title: Date与Calendar的恩怨情仇
date: 2018-05-16 21:42:27
categories: 编程语言
tags:
- Java
---

有时在我们的项目中，我们需要在实体中添加属性：创建时间与更新时间，我们可以直接用`Hibernate`给我们提供的注解`@CreationTimestamp`和`@UpdateTimestamp`来实现自动维护创建与更新时间信息。

当选用时间时，发现遇到了问题，发现`Java`为我们提供了好多日期类，有`util.Date`、`sql.Date`，还有日历`Calendar`，实际使用时到底该如何选择呢？

<!-- more -->

**util.Date**

打开官方文档，我们可以看到，`util.Date`类中的好多方法都已经加上了`Deprecated`(废弃/不推荐)的标识。

{% asset_img 0.png util.Date %}

既然官方都不推荐使用，那我们就放弃这个类吧，版本更新时还保留着这个类应该是官方为了兼容低版本。

**sql.Date**

当`util.Date`用了一段时间之后，开发者们纷纷使用。

但是有些人发现，自己仅仅使用`util.Date`存点年月日的时间，对应数据库中的日期，用于查询或显示，不进行什么时间的复杂操作，所以会觉得`util.Date`太复杂，很多方法都用不到。

所以就设计了`sql.Date`类，这个类继承`util.Date`，但这个类相对简单，包含年月日信息，将什么时分秒都清零。

{% asset_img 1.png date %}

`sql.Date`能对应数据库中的`date`类型对应，保存年月日。

{% asset_img 2.png 日期 %}

**util.Calendar**

有人觉得`util.Date`复杂，有人却不这么认为。

他们会进行时间的复杂逻辑运算，如当前时间加上多长时间(几个月、几年)然后得到个日期，再保存起来。

如果用`util.Date`，我们需要手动去乘以多少多少小时、多少多少秒，所以他们觉得`util.Date`类的功能不够强大，简单的加个日期还需要我手动去乘，你应该给我方法啊。

所以`util.Calendar`应运而生。

打开官方文档，我们可以看到`util.Calendar`强大的功能。

{% asset_img 3.png util.Calendar %}

就拿我们之前的例子来说，我们需要获取一个从今天开始七个月零十一天后的日期。

如果用`util.Date`，我们需要获取今天的时间戳，然后开始算以供有多少天，然后乘以24小时，乘以60分钟，乘以60秒，不得不说这太复杂了。

如果用强大的`util.Calendar`呢？我们可以直接获取一个当前的日历，然后调用`add`方法，直接在月字段上加7，在天字段上加11，即可实现，是不是很强大呢？

**总结**

`util.Date`已经不推荐使用，所以开发中不要再使用这个类啦。

`sql.Date`保存年月日信息，当我们需要与数据库中的`date`类型对应时，可以考虑`sql.Date`。

`util.Calendar`功能强大，当我们需要进行时间的运算时，可以考虑`util.Calendar`，里面的诸多方法能让我们的效率提升。
